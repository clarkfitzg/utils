options(repos=structure(c(CRAN="https://cran.rstudio.com/")))

# Go into debugger
# options(error=utils::recover)


sparkdev <- function(master=TRUE){

    if(master){
        lib.loc <- "/Users/clark/dev/sparkr_libs/master"
    } else{
        lib.loc <- "/Users/clark/dev/spark/R/lib"
    }

    # Load SparkR and start a session
    library("SparkR", lib.loc = lib.loc)

    # Seems to have trouble with port retries?
    try(sparkR.session())

    library("testthat")
}
